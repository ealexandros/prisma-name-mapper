<h1 align="center">
  🧭 Prisma Name Mapper 🧭
</h1>

<div align="center">
  <img src="https://img.shields.io/badge/Prisma-0F172A?&logo=prisma" />
  <img src="https://shields.io/badge/TypeScript-0F172A?logo=TypeScript&logoColor=06B6D4" />
</div>

<br />

<p align="center">A custom Prisma generator that creates a TypeScript mapping of your model and field names to their database-level names. Stop guessing and start knowing exactly what your database columns are called.</p>

## 🤔 What is this?

When you use Prisma, you often define your models in camelCase and your database tables and columns in snake_case using @@map and @map. This is great for your code, but what happens when you need to write a raw SQL query, create a migration script, or build a data utility? You end up guessing the database names or constantly checking your schema.prisma file.

Prisma Name Mapper solves this by automatically generating a TypeScript object that maps your Prisma model and field names to their corresponding database names.

## 📦 Example Output

Given a Prisma schema like this:

```prisma
// schema.prisma

model User {
  id        String   @id @default(cuid()) @map("user_id")
  fullName  String   @map("full_name")
  createdAt DateTime @map("created_at")

  @@map("user_table")
}
```

This generator will create the following file, giving you type-safe access to your database names:

```typescript
// 🔴 AUTO-GENERATED FILE — DO NOT EDIT! 🔴
//
// This file is automatically generated by prisma-name-mapper.
// Do not edit this file directly.

export const PrismaNameMapper = {
  User: {
    dbName: "user_table",
    fields: {
      id: "user_id",
      fullName: "full_name",
      createdAt: "created_at",
    },
  },
} as const;
```

## 🚀 Getting Started

#### 1. Installation

Install the package as a development dependency in your project.

```bash
# Using npm
$ npm install -D prisma-name-mapper

# Using pnpm
$ pnpm add -D prisma-name-mapper

# Using bun
$ bun add -d prisma-name-mapper
```

#### 2. Configuration

In your schema.prisma file, add the dbnames generator:

```prisma
// schema.prisma

generator dbnames {
  provider = "prisma-name-mapper"
  // (Required) Define a custom output path.
  output = "../generated/mapper.ts"
}

model User {
  // ... your models
}
```

#### 3. Generate the Map

Run the prisma generate command. The mapper file will be created at your specified output path.

```bash
$ bunx prisma generate
```

## ✨ Why Use It?

This utility becomes incredibly useful in a variety of scenarios:

- Raw SQL Queries: Write type-safe raw SQL queries without hardcoding table or column names.

```typescript
import { PrismaNameMapper } from "@/prisma/generated/mapper";
import { prisma } from "@/lib/prisma/client";

const userId = "some-user-id";
const userTable = Prisma.raw(PrismaNameMapper.User.dbName);
const userIdCol = Prisma.raw(PrismaNameMapper.User.fields.id);

const query = Prisma.sql`
  SELECT * FROM ${userTable} u WHERE ${userIdCol} = $1
`;
const users = await prisma.$queryRaw(query userId);
```

- Database Utilities & Seeding: Build scripts for migrations, seeding, or data manipulation with confidence.

```typescript
// A script to count users

const userTable = PrismaNameMapper.User.dbName;
console.log(`There are ${count} rows in the ${userTable} table.`);
```

- Logging & Auditing: Create detailed logs that reference the exact database columns being modified.

- Dynamic APIs: Build dynamic API endpoints or data services that need to know about the underlying database schema.

## 🤝 Contributing

Contributions are welcome! If you have a feature request, bug report, or want to improve the code, please open an issue or submit a pull request.

## 📜 License

This project is licensed under the MIT License. See the LICENSE file for details.

Made with ❤️ – Built for the Community 🤲
